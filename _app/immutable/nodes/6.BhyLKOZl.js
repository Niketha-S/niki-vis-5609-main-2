import{t as O,a as W}from"../chunks/DqiF99WP.js";import"../chunks/Bi2c9ZaJ.js";import{a0 as j,a5 as E,k as P,a1 as R,a9 as A}from"../chunks/DllsF_mC.js";import{b as H}from"../chunks/DUdfFFCA.js";import{i as D}from"../chunks/DUenjkP0.js";import{o as q}from"../chunks/BccD5po5.js";import{L as $,F as N,S as J,E as V,W as K,P as Q,a as U,b as Z,T as C,A as I,D as X,c as Y,M as F,d as L,l as ee,o as te,C as ne,e as oe,f as ae}from"../chunks/pWZbMk7U.js";import{c as se,b as ie,l as re}from"../chunks/DUXprHVX.js";class de extends ${constructor(t){super(t)}load(t,e,i,r){const s=this,a=new N(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(f){const g=s.parse(JSON.parse(f));e&&e(g)},i,r)}parse(t){return new ce(t)}}class ce{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const i=[],r=le(t,e,this.data);for(let s=0,a=r.length;s<a;s++)i.push(...r[s].toShapes());return i}}function le(x,t,e){const i=Array.from(x),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,a=[];let f=0,g=0;for(let w=0;w<i.length;w++){const y=i[w];if(y===`
`)f=0,g-=s;else{const v=he(y,r,f,g,e);f+=v.offsetX,a.push(v.path)}}return a}function he(x,t,e,i,r){const s=r.glyphs[x]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+x+'" does not exists in font family '+r.familyName+".");return}const a=new J;let f,g,w,y,v,S,_,z;if(s.o){const l=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let c=0,o=l.length;c<o;)switch(l[c++]){case"m":f=l[c++]*t+e,g=l[c++]*t+i,a.moveTo(f,g);break;case"l":f=l[c++]*t+e,g=l[c++]*t+i,a.lineTo(f,g);break;case"q":w=l[c++]*t+e,y=l[c++]*t+i,v=l[c++]*t+e,S=l[c++]*t+i,a.quadraticCurveTo(v,S,w,y);break;case"b":w=l[c++]*t+e,y=l[c++]*t+i,v=l[c++]*t+e,S=l[c++]*t+i,_=l[c++]*t+e,z=l[c++]*t+i,a.bezierCurveTo(v,S,_,z,w,y);break}}return{offsetX:s.ha*t,path:a}}class T extends V{constructor(t,e={}){const i=e.font;if(i===void 0)super();else{const r=i.generateShapes(t,e.size);e.depth===void 0&&(e.depth=50),e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}var pe=O('<div class="container svelte-3jn0bu"></div>');function ve(x,t){j(t,!1);let e=R(),i,r,s;const a=-250,f=[];let g;const w=new ae;q(async()=>{const o=await y();console.log("Loaded movie data - ",o),o&&o.length>0?v(window.innerWidth,window.innerHeight,o):console.error("No valid movie data available.")});async function y(){try{console.log("Loading movie data...");const o=await se("./summer_movies.csv");console.log("Raw CSV Data:",o);const m=o.map(n=>({primary_title:n.primary_title,genres:n.genres?n.genres.split(",").map(p=>p.trim()):[]})).filter(n=>n.primary_title&&n.genres.length>0);console.log("Parsed and filtered data:",m);const d=m.reduce((n,p)=>(p.genres.forEach(b=>{n[b]?n[b]+=1:n[b]=1}),n),{});console.log("Genre count:",d);const M=Object.keys(d).map(n=>({genre:n,number_of_movies:d[n]}));return console.log("Genre Count Array:",M),M}catch(o){return console.error("Error loading movie data:",o),[]}}function v(o,m,d){s=new K({antialias:!0}),s.setPixelRatio(window.devicePixelRatio),s.setSize(o,m),s.shadowMap.enabled=!0,s.shadowMap.type=Q,P(e).appendChild(s.domElement),i=new U(23,o/m,10,3e3),i.position.set(0,100,2500),r=new Z,new C().load("3d/sky.jpg",h=>{h.repeat.set(.8,1),r.background=h});const M=new I(16777215);r.add(M);const n=new X(16777215,3);n.position.set(0,1500,1e3),n.castShadow=!0,Object.assign(n.shadow.camera,{top:2e3,bottom:-2e3,left:-2e3,right:2e3,near:1200,far:2500}),n.shadow.bias=1e-4,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=1024,r.add(n),Y(r,a,"3d/grasslight-big.jpg"),new de().load("3d/helvetiker_bold.typeface.json",h=>{const u=new T("Summer Movies-Niketha",{font:h,size:40,depth:15});u.computeBoundingBox();const B=-.5*(u.boundingBox.max.x-u.boundingBox.min.x),G=new F({color:4495616}),k=new L(u,G);k.position.x=B,k.position.y=a+700,k.castShadow=!0,r.add(k),S(r,h,d)});const b=[{path:"3d/Horse.glb",speed:300,duration:1,x:100,y:a,z:300,scale:.5},{path:"3d/Horse.glb",speed:300,duration:1,x:100,y:a,z:450,scale:.5},{path:"3d/Flamingo.glb",speed:350,duration:1,x:300,y:a+550,z:100,scale:.5},{path:"3d/Flamingo.glb",speed:350,duration:1,x:300,y:a+550,z:200,scale:.5},{path:"3d/Parrot.glb",speed:350,duration:.5,x:500,y:a+500,z:700,scale:.5}];g=ee(b,r,g,f),window.addEventListener("resize",()=>te(i,s,window.innerWidth,window.innerHeight)),s.setAnimationLoop(l)}function S(o,m,d){const p=ie().domain(d.map(h=>h.genre)).range([-500,500]).padding(.9),b=re().domain([0,Math.max(...d.map(h=>h.number_of_movies))]).range([0,400]);d.forEach(h=>{const u=_(b(h.number_of_movies),p.bandwidth());u.position.set(p(h.genre),a+b(h.number_of_movies)/2+15,0),o.add(u),z(o,`${h.genre}: ${h.number_of_movies}`,p(h.genre)-p.bandwidth()/2,a+10,u.position.z+p.bandwidth()+20,m)})}function _(o,m){const d=m*2.5,M=new ne(d,d,o*2,32),n=new F({map:new C().load("./3d/wood-texture.jpg")}),p=new L(M,n);return p.castShadow=!0,p.receiveShadow=!0,p}function z(o,m,d,M,n,p){const b=new T(m,{font:p,size:4,depth:2}),h=new oe({color:16777215}),u=new L(b,h);u.position.set(d,M,n),u.castShadow=!0,u.receiveShadow=!1,u.rotation.y=Math.PI*2,u.position.y-=6,o.add(u)}function l(){const o=w.getDelta();g.update(o),f.forEach(m=>{const d=m;typeof d.speed=="number"&&(d.position.x+=(d.speed||0)*o),d.position.x>window.innerWidth/2&&(d.position.x=-window.innerWidth/2-Math.random()*200)}),s.render(r,i)}D();var c=pe();H(c,o=>A(e,o),()=>P(e)),W(x,c),E()}export{ve as component};
