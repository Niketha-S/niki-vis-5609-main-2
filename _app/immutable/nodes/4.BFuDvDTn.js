import{t as j,a as N,n as T,c as le}from"../chunks/DqiF99WP.js";import"../chunks/Bi2c9ZaJ.js";import{a0 as X,s as S,f as F,a5 as K,k,a1 as M,a9 as z,a6 as B,a8 as E,a4 as P,l as ce}from"../chunks/DllsF_mC.js";import{s as ae}from"../chunks/BN5TdZZb.js";import{i as W}from"../chunks/DUenjkP0.js";import{o as Z}from"../chunks/BccD5po5.js";import{I as fe,r as me,l as $,o as J,f as Q,b as ee,c as oe}from"../chunks/DUXprHVX.js";import{s as I,e as te,m as U,a as V,b as H,B as ue}from"../chunks/MpXQgLNm.js";import{s as w}from"../chunks/BdWRhC0o.js";import{b as Y}from"../chunks/DUdfFFCA.js";import{p as ge}from"../chunks/CYjJcxkb.js";import{w as de,c as C,a as he,x as pe,y as ve,b as se,l as ie}from"../chunks/Co2p4suz.js";import{e as L,i as O}from"../chunks/V1YzKkg1.js";function ye(s){return s}function xe(s,i,...o){return be(s,ye,i,o)}function be(s,i,o,c){return function g(n,m){if(m>=c.length)return o(n);const r=new fe,d=c[m++];let f=-1;for(const b of n){const e=d(b,++f,n),x=r.get(e);x?x.push(b):r.set(e,[b])}for(const[b,e]of r)r.set(b,g(e,m));return i(r)}(s,0)}function ke(s){for(var i=s.length/6|0,o=new Array(i),c=0;c<i;)o[c]="#"+s.slice(c*6,++c*6);return o}const we=s=>me(s[s.length-1]);var Ce=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ke);const Se=we(Ce);function _e(s,i,o){var c=null,g=C(!0),n=null,m=he,r=null,d=de(f);s=typeof s=="function"?s:s===void 0?pe:C(+s),i=typeof i=="function"?i:i===void 0?C(0):C(+i),o=typeof o=="function"?o:o===void 0?ve:C(+o);function f(e){var x,G,_,A=(e=se(e)).length,D,t=!1,l,u=new Array(A),a=new Array(A);for(n==null&&(r=m(l=d())),x=0;x<=A;++x){if(!(x<A&&g(D=e[x],x,e))===t)if(t=!t)G=x,r.areaStart(),r.lineStart();else{for(r.lineEnd(),r.lineStart(),_=x-1;_>=G;--_)r.point(u[_],a[_]);r.lineEnd(),r.areaEnd()}t&&(u[x]=+s(D,x,e),a[x]=+i(D,x,e),r.point(c?+c(D,x,e):u[x],o?+o(D,x,e):a[x]))}if(l)return r=null,l+""||null}function b(){return ie().defined(g).curve(m).context(n)}return f.x=function(e){return arguments.length?(s=typeof e=="function"?e:C(+e),c=null,f):s},f.x0=function(e){return arguments.length?(s=typeof e=="function"?e:C(+e),f):s},f.x1=function(e){return arguments.length?(c=e==null?null:typeof e=="function"?e:C(+e),f):c},f.y=function(e){return arguments.length?(i=typeof e=="function"?e:C(+e),o=null,f):i},f.y0=function(e){return arguments.length?(i=typeof e=="function"?e:C(+e),f):i},f.y1=function(e){return arguments.length?(o=e==null?null:typeof e=="function"?e:C(+e),f):o},f.lineX0=f.lineY0=function(){return b().x(s).y(i)},f.lineY1=function(){return b().x(s).y(o)},f.lineX1=function(){return b().x(c).y(i)},f.defined=function(e){return arguments.length?(g=typeof e=="function"?e:C(!!e),f):g},f.curve=function(e){return arguments.length?(m=e,n!=null&&(r=m(n)),f):m},f.context=function(e){return arguments.length?(e==null?n=r=null:r=m(n=e),f):n},f}function re(s,i){if((m=s.length)>1)for(var o=1,c,g,n=s[i[0]],m,r=n.length;o<m;++o)for(g=n,n=s[i[o]],c=0;c<r;++c)n[c][1]+=n[c][0]=isNaN(g[c][1])?g[c][0]:g[c][1]}function ne(s){for(var i=s.length,o=new Array(i);--i>=0;)o[i]=i;return o}function Ae(s,i){return s[i]}function De(s){const i=[];return i.key=s,i}function Re(){var s=C([]),i=ne,o=re,c=Ae;function g(n){var m=Array.from(s.apply(this,arguments),De),r,d=m.length,f=-1,b;for(const e of n)for(r=0,++f;r<d;++r)(m[r][f]=[0,+c(e,m[r].key,f,n)]).data=e;for(r=0,b=se(i(m));r<d;++r)m[b[r]].index=r;return o(m,b),m}return g.keys=function(n){return arguments.length?(s=typeof n=="function"?n:C(Array.from(n)),g):s},g.value=function(n){return arguments.length?(c=typeof n=="function"?n:C(+n),g):c},g.order=function(n){return arguments.length?(i=n==null?ne:typeof n=="function"?n:C(Array.from(n)),g):i},g.offset=function(n){return arguments.length?(o=n??re,g):o},g}var Ge=j("<h2>Q1: How do the top three movie genres (by number of movies) change over time?</h2> <h3>Line Chart</h3> <svg></svg> <h3>Stacked Area Chart</h3> <svg></svg> <h3>Grouped Bar Chart</h3> <svg></svg>",1);function Ne(s,i){X(i,!1);let o=ge(i,"movies",8),c=M(),g=M(),n=M(),m=600,r=400,d={top:40,right:30,bottom:50,left:50};function f(t){let l=xe(t.flatMap(a=>a.genres.includes("Comedy")||a.genres.includes("Drama")||a.genres.includes("Romance")?a.genres.map(h=>({year:+a.year,genre:h})):[]),a=>a.length,a=>a.year,a=>a.genre);return Array.from(l,([a,h])=>({year:a,Comedy:h.get("Comedy")||0,Drama:h.get("Drama")||0,Romance:h.get("Romance")||0})).sort((a,h)=>a.year-h.year)}Z(()=>{let t;const l=localStorage.getItem("q1_chart_data");if(l)t=JSON.parse(l);else if(o()&&o().length>0)t=f(o()),localStorage.setItem("q1_chart_data",JSON.stringify(t));else return;b(t),e(t),x(t)});function b(t){const l=I(k(c));l.selectAll("*").remove();const u=$().domain(te(t,v=>v.year)).range([d.left,m-d.right]),a=$().domain([0,U(t,v=>Math.max(v.Comedy,v.Drama,v.Romance))]).nice().range([r-d.bottom,d.top]),h=J().domain(["Comedy","Drama","Romance"]).range(["#ff5733","#3399ff","#ff33cc"]),R=ie().x(v=>u(v.year)).y((v,y,q)=>a(v[`${I(q[y].parentNode).datum()}`]));["Comedy","Drama","Romance"].forEach(v=>{l.append("path").datum(t).attr("fill","none").attr("stroke",h(v)).attr("stroke-width",2).attr("d",R.y(y=>a(y[v])))}),l.append("g").attr("transform",`translate(0,${r-d.bottom})`).call(V(u).tickFormat(Q("d"))),l.append("g").attr("transform",`translate(${d.left},0)`).call(H(a))}function e(t){const l=I(k(g));l.selectAll("*").remove();const u=["Comedy","Drama","Romance"],a=$().domain(te(t,y=>y.year)).range([d.left,m-d.right]),h=$().domain([0,U(t,y=>y.Comedy+y.Drama+y.Romance)]).nice().range([r-d.bottom,d.top]),R=J().domain(u).range(["#ff5733","#3399ff","#ff33cc"]),v=Re().keys(u)(t);l.selectAll("layers").data(v).join("path").attr("fill",y=>R(y.key)).attr("d",_e().x(y=>a(y.data.year)).y0(y=>h(y[0])).y1(y=>h(y[1]))),l.append("g").attr("transform",`translate(0,${r-d.bottom})`).call(V(a).tickFormat(Q("d"))),l.append("g").attr("transform",`translate(${d.left},0)`).call(H(h))}function x(t){const l=I(k(n));l.selectAll("*").remove();const u=ee().domain(t.map(p=>p.year)).range([d.left,m-d.right]).padding(.2),a=ee().domain(["Comedy","Drama","Romance"]).range([0,u.bandwidth()]).padding(.05),h=$().domain([0,U(t,p=>Math.max(p.Comedy,p.Drama,p.Romance))]).nice().range([r-d.bottom,d.top]),R=J().domain(["Comedy","Drama","Romance"]).range(["#ff5733","#3399ff","#ff33cc"]);l.append("g").selectAll("g").data(t).join("g").attr("transform",p=>`translate(${u(p.year)},0)`).selectAll("rect").data(p=>["Comedy","Drama","Romance"].map(v=>({key:v,value:p[v]}))).join("rect").attr("x",p=>a(p.key)).attr("y",p=>h(p.value)).attr("width",a.bandwidth()).attr("height",p=>r-d.bottom-h(p.value)).attr("fill",p=>R(p.key)),l.append("g").attr("transform",`translate(0,${r-d.bottom})`).call(V(u).tickFormat(Q("d"))),l.append("g").attr("transform",`translate(${d.left},0)`).call(H(h))}W();var G=Ge(),_=S(F(G),4);w(_,"width",m),w(_,"height",r),Y(_,t=>z(c,t),()=>k(c));var A=S(_,4);w(A,"width",m),w(A,"height",r),Y(A,t=>z(g,t),()=>k(g));var D=S(A,4);w(D,"width",m),w(D,"height",r),Y(D,t=>z(n,t),()=>k(n)),N(s,G),K()}var Me=T('<rect width="40" fill="steelblue"></rect><text font-size="12" text-anchor="middle"> </text>',1),ze=T('<rect width="25" height="25"></rect>'),$e=T('<line stroke="gray"></line>'),Be=j('<h2>Q2: Are there any correlations between different genres? For example, which genre often co-occurs with comedy in a movie?</h2> <h2>First graph- Bar chart</h2> <svg width="500" height="350"><text x="250" y="20" text-anchor="left" font-size="14">Top Genre Pairs</text><text x="250" y="340" text-anchor="middle" font-size="12">Genre Pairs</text><text x="10" y="180" text-anchor="middle" font-size="12" transform="rotate(-90,10,180)">Frequency</text><!></svg> <h2>Second graph- Heatmap</h2> <svg width="500" height="500"><text x="250" y="490" text-anchor="middle" font-size="12">Genres</text><text x="10" y="250" text-anchor="middle" font-size="12" transform="rotate(-90,10,250)">Genres</text><!></svg> <h2>Third graph- Genre Relationship Network</h2> <svg width="500" height="500"><text x="250" y="20" text-anchor="middle" font-size="14">Genre Relationship Network</text><!></svg>',1);function Ee(s,i){X(i,!1);let o=[],c={},g=M([]),n=M([]),m=new Set;async function r(){try{const t=localStorage.getItem("movies");t?o=JSON.parse(t):(o=await oe("./summer_movies.csv",u=>({genres:u.genres.split(","),year:new Date(u.year).getFullYear()})),localStorage.setItem("movies",JSON.stringify(o))),d()}catch(t){console.error("Error loading CSV:",t)}}function d(){c={},m.clear(),o.forEach(t=>{const l=t.genres;l.forEach(u=>m.add(u));for(let u=0;u<l.length;u++)for(let a=u+1;a<l.length;a++){const h=[l[u],l[a]].sort().join(" & ");c[h]=(c[h]||0)+1}}),z(g,Object.entries(c).sort((t,l)=>l[1]-t[1]).slice(0,10)),f()}function f(){const t=Array.from(m);z(n,t.map(l=>t.map(u=>{const a=[l,u].sort().join(" & ");return c[a]||0})))}Z(r),W();var b=Be(),e=S(F(b),4),x=S(B(e),3);L(x,1,()=>k(g),O,(t,l,u)=>{let a=()=>k(l)[0],h=()=>k(l)[1];var R=Me(),p=F(R);w(p,"x",u*50+50);var v=S(p);w(v,"x",u*50+70);var y=B(v,!0);E(v),P(()=>{w(p,"y",300-h()*5),w(p,"height",h()*5),w(v,"y",290-h()*5),ae(y,a())}),N(t,R)}),E(e);var G=S(e,4),_=S(B(G),2);L(_,1,()=>k(n),O,(t,l,u)=>{var a=le(),h=F(a);L(h,1,()=>k(l),O,(R,p,v)=>{var y=ze();w(y,"x",v*25+50),w(y,"y",u*25+50),P(q=>w(y,"fill",q),[()=>Se(k(p)/10)],ce),N(R,y)}),N(t,a)}),E(G);var A=S(G,4),D=S(B(A));L(D,1,()=>k(g),O,(t,l)=>{let u=()=>k(l)[1];var a=$e();w(a,"x1",Math.random()*500),w(a,"y1",Math.random()*500),w(a,"x2",Math.random()*500),w(a,"y2",Math.random()*500),P(()=>w(a,"stroke-width",u()/5)),N(t,a)}),E(A),N(s,b),K()}var Fe=j("<h1>Summer Movies</h1> <h2>-Niketha Sabesan</h2> <p> </p> <!> <!> <!>",1);function Xe(s,i){X(i,!1);let o=M([]);async function c(){try{z(o,await oe("./summer_movies.csv",e=>({num_votes:Number(e.num_votes),runtime_minutes:Number(e.runtime_minutes),genres:e.genres.split(","),year:new Date(e.year),average_rating:Number(e.average_rating),tconst:e.tconst,title_type:e.title_type,primary_title:e.primary_title,original_title:e.original_title,simple_title:e.simple_title}))),console.log("Loaded CSV Data:",k(o))}catch(b){console.error("Error loading CSV:",b)}}Z(c),W();var g=Fe(),n=S(F(g),4),m=B(n);E(n);var r=S(n,2);ue(r,{get movies(){return k(o)}});var d=S(r,2);Ne(d,{get movies(){return k(o)}});var f=S(d,2);Ee(f,{get movies(){return k(o)}}),P(()=>ae(m,`Here are ${(k(o).length==0?"...":k(o).length+" ")??""} movies`)),N(s,g),K()}export{Xe as component};
