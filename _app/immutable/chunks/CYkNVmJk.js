import{t as st,c as G,a as b,n as X}from"./DqiF99WP.js";import{a0 as rt,U as lt,f as D,a6 as H,k as t,a4 as I,Y as J,av as L,a8 as O,s as R,a9 as U,a5 as it}from"./DllsF_mC.js";import{d as nt,s as ct}from"./BN5TdZZb.js";import{a as ot,p as ft}from"./BMfMIjeu.js";import{e as K,i as P}from"./V1YzKkg1.js";import{s as r}from"./BdWRhC0o.js";import{b as Q}from"./DUdfFFCA.js";import{p as T}from"./CYjJcxkb.js";import{b as ut,l as dt}from"./DUXprHVX.js";import{s as V,a as gt,b as mt,e as W,t as _t}from"./MpXQgLNm.js";var ht=(y,e,g)=>e(t(g)),bt=X('<circle stroke="steelblue" stroke-width="2" class="svelte-mz9u0u"></circle>'),vt=(y,e,g)=>e(t(g)),xt=X('<circle stroke="steelblue" stroke-width="2" class="svelte-mz9u0u"></circle>'),yt=st('<svg class="svelte-mz9u0u"><g class="points svelte-mz9u0u"></g><g></g><g></g></svg> <div class="selectedInfo svelte-mz9u0u"> </div>',1);function It(y,e){rt(e,!0);const g=T(e,"height",3,500),Y=T(e,"width",3,600);let c=L(void 0);const v={top:15,bottom:50,left:60,right:10},l={top:v.top,right:Y()-v.right,bottom:g()-v.bottom,left:v.left},k=[3,15];function z(a,s,i){if(i.length===0)return null;let o=[];return s==="x"&&(o=[l.left,l.right]),s==="y"&&(o=[l.bottom,l.top]),s==="size"&&(o=k),typeof i[0][a]=="string"?ut().domain(i.map(u=>u[a])).range(o).padding(.2):typeof i[0][a]=="number"?dt().domain(W(i,u=>u[a])).range(o):i[0][a]instanceof Date?_t().domain(W(i,u=>u[a])).range(o):null}const f=J(()=>z(e.x,"x",e.movies)),m=J(()=>z(e.y,"y",e.movies)),x=J(()=>e.size?z(e.size,"size",e.movies):null);let p=L(void 0),S=L(void 0);function Z(){!t(f)||!t(m)||(V(t(p)).call(gt(t(f)).ticks(6)).selectAll("text").attr("transform","rotate(30)").style("text-anchor","start"),V(t(S)).call(mt(t(m))))}function j(a){U(c,ft(t(c)===a?void 0:a))}lt(()=>{Z()});var q=yt(),h=D(q),w=H(h);K(w,21,()=>e.movies,P,(a,s)=>{var i=G(),o=D(i);{var u=_=>{var n=G(),C=D(n);K(C,17,()=>t(s).genres,P,(M,B)=>{var d=bt();d.__click=[ht,j,s],I((tt,et,at)=>{r(d,"cx",tt),r(d,"cy",et),r(d,"r",at),r(d,"fill",t(s)===t(c)?"steelblue":"transparent"),r(d,"opacity",t(s)===t(c)?1:.5)},[()=>t(f)?t(f)(t(B))+t(f).bandwidth()/2:l.left,()=>t(m)?t(m)(t(s)[e.y]):l.bottom,()=>t(x)?t(x)(t(s)[e.size]):k[0]]),b(M,d)}),b(_,n)},$=_=>{var n=xt();n.__click=[vt,j,s],I((C,M,B)=>{r(n,"cx",C),r(n,"cy",M),r(n,"r",B),r(n,"fill",t(s)===t(c)?"steelblue":"transparent"),r(n,"opacity",t(s)===t(c)?1:.5)},[()=>t(f)?t(f)(t(s)[e.x]):l.left,()=>t(m)?t(m)(t(s)[e.y]):l.bottom,()=>t(x)?t(x)(t(s)[e.size]):k[0]]),b(_,n)};ot(o,_=>{e.x==="genres"?_(u):_($,!1)})}b(a,i)}),O(w);var A=R(w);Q(A,a=>U(p,a),()=>t(p));var E=R(A);Q(E,a=>U(S,a),()=>t(S)),O(h);var F=R(h,2),N=H(F,!0);O(F),I(a=>{r(h,"width",Y()),r(h,"height",g()),r(A,"transform",`translate(0, ${l.bottom??""})`),r(E,"transform",`translate(${l.left}, 0)`),ct(N,a)},[()=>t(c)?JSON.stringify(t(c),null,2):"Click on a point to see details"]),b(y,q),it()}nt(["click"]);export{It as S};
